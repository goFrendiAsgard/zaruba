<!--startTocHeader-->
[ğŸ ](../../../README.md) > [ğŸ‘·ğŸ½ Use Cases](../../README.md) > [ğŸ“¦ Add Resources](../README.md) > [ğŸ§© Integration](README.md)
# ğŸ“¦ External Repository
<!--endTocHeader-->


At some point, you might need to add external repository into your monorepo project.

To do this you need to either use:

* [git submodule](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
* [git subrepo](https://github.com/ingydotnet/git-subrepo), or
* [git subtree](https://www.atlassian.com/git/tutorials/git-subtree)

Under the hood, Zaruba use `git subtree` since it is likely available in every git client.

All external repo will be treated as subrepo.

# Related Task

There are several builtin tasks you can use to manage subrepo:

* [initSubrepos](../../../core-tasks/initSubrepos.md)
* [addSubrepo](../../../core-tasks/addSubrepo.md)
* [pullSubrepos](../../../core-tasks/pullSubrepos.md)
* [pushSubrepos](../../../core-tasks/pushSubrepos.md)


# Add Subrepo

To add subrepo, you can perform:

```
zaruba please addSubrepo subrepoUrl="<subrepo-url>" subrepoPrefix="<subrepo-directory>" 
zaruba please pullSubrepos 

```

__Example:__

Suppose you want to create a zaruba project, and add [git@github.com:state-alchemists/fibonacci-clock.git](https://github.com/state-alchemists/fibonacci-clock) to your project, then you can do:

<!--startCode-->
```bash
# Create a Zaruba project
mkdir -p examples/playground/use-cases/external-repositories
cd examples/playground/use-cases/external-repositories
zaruba please initProject

# Set default branch to master
zaruba please setProjectValue defaultBranch master

# Add subrepo and pull
zaruba please addSubrepo subrepoUrl="git@github.com:state-alchemists/fibonacci-clock.git" subrepoPrefix="fibo" 
zaruba please pullSubrepos 

# See the directory structure
tree
```
 
<details>
<summary>Output</summary>
 
```````
ğŸ’€ ğŸ” Job Starting...
         Elapsed Time: 4.2Âµs
         Current Time: 22:31:24
ğŸ’€ ğŸ Run ğŸš§ 'initProject' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ initProject          ğŸš§ 22:31:25.198 Initialized empty Git repository in /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.git/
ğŸ’€    ğŸš€ initProject          ğŸš§ 22:31:25.212 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ initProject          ğŸš§ 22:31:25.212 Project created
ğŸ’€ ğŸ‰ Successfully running ğŸš§ 'initProject' command
ğŸ’€ ğŸ” Job Running...
         Elapsed Time: 763.3709ms
         Current Time: 22:31:25
ğŸ’€ ğŸ‰ ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ‰ Job Complete!!! ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ”¥ Terminating
ğŸ’€ ğŸ” Job Ended...
         Elapsed Time: 965.6158ms
         Current Time: 22:31:25
zaruba please initProject  
zaruba please setProjectValue defaultBranch master -e '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.env' -v '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/default.values.yaml'
ğŸ”¥ Command   : zaruba please
ğŸ”¥ Arguments : ["setProjectValue","defaultBranch","master"]
ğŸ”¥ Stderr    : value of input variable 'variableName' does not match '^.+$': 
ğŸ’€ ğŸ” Job Starting...
         Elapsed Time: 6.2Âµs
         Current Time: 22:31:26
ğŸ’€ ğŸ Run ğŸ” 'zrbIsProject' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ zrbIsProject         ğŸ” 22:31:27.556 Current directory is a valid zaruba project
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsProject' command
ğŸ’€ ğŸ Run ğŸ¥‚ 'addSubrepo' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ addSubrepo           ğŸ¥‚ 22:31:28.386 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ addSubrepo           ğŸ¥‚ 22:31:28.386 Subrepo fibo has been added
ğŸ’€ ğŸ‰ Successfully running ğŸ¥‚ 'addSubrepo' command
ğŸ’€ ğŸ” Job Running...
         Elapsed Time: 1.6736292s
         Current Time: 22:31:28
ğŸ’€ ğŸ‰ ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ‰ Job Complete!!! ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ”¥ Terminating
ğŸ’€ ğŸ” Job Ended...
         Elapsed Time: 1.8754584s
         Current Time: 22:31:28
zaruba please addSubrepo -e '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.env' -v 'subrepoUrl=git@github.com:state-alchemists/fibonacci-clock.git' -v 'subrepoPrefix=fibo' -v '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/default.values.yaml'
ğŸ’€ ğŸ” Job Starting...
         Elapsed Time: 3.3Âµs
         Current Time: 22:31:29
ğŸ’€ ğŸ Run ğŸ” 'zrbIsProject' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€ ğŸ Run ğŸ” 'zrbIsValidSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ zrbIsValidSubrepos   ğŸ” 22:31:29.93  All Subrepos are valid
ğŸ’€    ğŸš€ zrbIsProject         ğŸ” 22:31:29.931 Current directory is a valid zaruba project
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsValidSubrepos' command
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsProject' command
ğŸ’€ ğŸ Run ğŸ“¦ 'initSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.496 fibo origin is not exist
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.517 [master (root-commit) cba801e] ğŸ’€ Save works before pulling from git@github.com:state-alchemists/fibonacci-clock.git
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.517  3 files changed, 92 insertions(+)
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.517  create mode 100644 .gitignore
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.517  create mode 100644 default.values.yaml
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.517  create mode 100644 index.zaruba.yaml
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:30.588 git fetch fibo master
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:33.412 warning: no common commits
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:33.914 From github.com:state-alchemists/fibonacci-clock
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:33.915  * branch            master     -> FETCH_HEAD
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:33.916  * [new branch]      master     -> fibo/master
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:33.97  Added dir 'fibo'
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:36.482 From github.com:state-alchemists/fibonacci-clock
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:36.482  * branch            master     -> FETCH_HEAD
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:39.268 From github.com:state-alchemists/fibonacci-clock
ğŸ’€ ğŸ”¥ ğŸš€ initSubrepos         ğŸ“¦ 22:31:39.268  * branch            master     -> FETCH_HEAD
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:39.533 Already up to date.
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:39.537 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:39.537 Subrepos Initialized
ğŸ’€ ğŸ‰ Successfully running ğŸ“¦ 'initSubrepos' command
ğŸ’€ ğŸ Run ğŸ”½ 'pullSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:40.364 On branch master
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:40.364 nothing to commit, working tree clean
ğŸ’€ ğŸ”¥ ğŸš€ pullSubrepos         ğŸ”½ 22:31:42.837 From github.com:state-alchemists/fibonacci-clock
ğŸ’€ ğŸ”¥ ğŸš€ pullSubrepos         ğŸ”½ 22:31:42.837  * branch            master     -> FETCH_HEAD
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:43.106 Already up to date.
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:43.107 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:43.107 Subrepos pulled
ğŸ’€ ğŸ‰ Successfully running ğŸ”½ 'pullSubrepos' command
ğŸ’€ ğŸ” Job Running...
         Elapsed Time: 13.860632s
         Current Time: 22:31:43
ğŸ’€ ğŸ‰ ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ‰ Job Complete!!! ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ”¥ Terminating
ğŸ’€ ğŸ” Job Ended...
         Elapsed Time: 14.0615724s
         Current Time: 22:31:43
zaruba please pullSubrepos -e '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.env' -v '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/default.values.yaml'
.
â”œâ”€â”€ default.values.yaml
â”œâ”€â”€ fibo
â”‚Â Â  â”œâ”€â”€ Dockerfile
â”‚Â Â  â”œâ”€â”€ README.md
â”‚Â Â  â”œâ”€â”€ bootstrap.unity.css
â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ jquery.js
â”‚Â Â  â”œâ”€â”€ sample.env
â”‚Â Â  â””â”€â”€ start.sh
â”œâ”€â”€ index.zaruba.yaml
â””â”€â”€ log.zaruba.csv

1 directory, 12 files
```````
</details>
<!--endCode-->

After performing the task, you will see `fibo` directory in your project.

# Pull from subrepos

People might contribute to your subrepos. You want any changes in your subrepo is also reflected in your zaruba project. In that case you need to pull from subrepos.

To pull from your subrepos, you can invoke:

```
zaruba please pullSubrepos
```

__Example:__

<!--startCode-->
```bash
cd examples/playground/use-cases/external-repositories
zaruba please pullSubrepos
```
 
<details>
<summary>Output</summary>
 
```````
ğŸ’€ ğŸ” Job Starting...
         Elapsed Time: 2.2Âµs
         Current Time: 22:31:43
ğŸ’€ ğŸ Run ğŸ” 'zrbIsProject' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€ ğŸ Run ğŸ” 'zrbIsValidSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ zrbIsProject         ğŸ” 22:31:44.272 Current directory is a valid zaruba project
ğŸ’€    ğŸš€ zrbIsValidSubrepos   ğŸ” 22:31:44.273 All Subrepos are valid
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsProject' command
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsValidSubrepos' command
ğŸ’€ ğŸ Run ğŸ“¦ 'initSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:44.814 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:44.814 Subrepos Initialized
ğŸ’€ ğŸ‰ Successfully running ğŸ“¦ 'initSubrepos' command
ğŸ’€ ğŸ Run ğŸ”½ 'pullSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:45.285 On branch master
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:45.285 nothing to commit, working tree clean
ğŸ’€ ğŸ”¥ ğŸš€ pullSubrepos         ğŸ”½ 22:31:47.803 From github.com:state-alchemists/fibonacci-clock
ğŸ’€ ğŸ”¥ ğŸš€ pullSubrepos         ğŸ”½ 22:31:47.803  * branch            master     -> FETCH_HEAD
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:48.077 Already up to date.
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:48.078 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ pullSubrepos         ğŸ”½ 22:31:48.078 Subrepos pulled
ğŸ’€ ğŸ‰ Successfully running ğŸ”½ 'pullSubrepos' command
ğŸ’€ ğŸ” Job Running...
         Elapsed Time: 4.2712457s
         Current Time: 22:31:48
ğŸ’€ ğŸ‰ ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ‰ Job Complete!!! ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ”¥ Terminating
ğŸ’€ ğŸ” Job Ended...
         Elapsed Time: 4.4733561s
         Current Time: 22:31:48
zaruba please pullSubrepos -e '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.env' -v '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/default.values.yaml'
```````
</details>
<!--endCode-->

# Push to subrepos

Sometime you need any changes in your project to be reflected in your subrepos. In that case, you can push to subrepos.

To push to your subrepos, you can invoke:

```
zaruba please pushSubrepos
```

__Example:__

<!--startCode-->
```bash
cd examples/playground/use-cases/external-repositories
zaruba please pushSubrepos
```
 
<details>
<summary>Output</summary>
 
```````
ğŸ’€ ğŸ” Job Starting...
         Elapsed Time: 2.3Âµs
         Current Time: 22:31:48
ğŸ’€ ğŸ Run ğŸ” 'zrbIsProject' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€ ğŸ Run ğŸ”— 'updateProjectLinks' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€ ğŸ Run ğŸ” 'zrbIsValidSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ updateProjectLinks   ğŸ”— 22:31:49.205 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ updateProjectLinks   ğŸ”— 22:31:49.205 Links updated
ğŸ’€    ğŸš€ zrbIsProject         ğŸ” 22:31:49.211 Current directory is a valid zaruba project
ğŸ’€    ğŸš€ zrbIsValidSubrepos   ğŸ” 22:31:49.268 All Subrepos are valid
ğŸ’€ ğŸ‰ Successfully running ğŸ”— 'updateProjectLinks' command
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsProject' command
ğŸ’€ ğŸ‰ Successfully running ğŸ” 'zrbIsValidSubrepos' command
ğŸ’€ ğŸ Run ğŸ“¦ 'initSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:49.948 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ initSubrepos         ğŸ“¦ 22:31:49.948 Subrepos Initialized
ğŸ’€ ğŸ‰ Successfully running ğŸ“¦ 'initSubrepos' command
ğŸ’€ ğŸ Run ğŸ”¼ 'pushSubrepos' command on /home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories
ğŸ’€    ğŸš€ pushSubrepos         ğŸ”¼ 22:31:50.424 On branch master
ğŸ’€    ğŸš€ pushSubrepos         ğŸ”¼ 22:31:50.424 nothing to commit, working tree clean
ğŸ’€    ğŸš€ pushSubrepos         ğŸ”¼ 22:31:50.452 git push using:  fibo master
ğŸ’€ ğŸ”¥ ğŸš€ pushSubrepos         ğŸ”¼ 22:31:53.424 1/3 (0) [0]2/3 (0) [0]3/3 (0) [0]3/3 (1) [1]3/3 (1) [2]Everything up-to-date
ğŸ’€    ğŸš€ pushSubrepos         ğŸ”¼ 22:31:53.425 ğŸ‰ğŸ‰ğŸ‰
ğŸ’€    ğŸš€ pushSubrepos         ğŸ”¼ 22:31:53.425 Subrepos pushed
ğŸ’€ ğŸ‰ Successfully running ğŸ”¼ 'pushSubrepos' command
ğŸ’€ ğŸ” Job Running...
         Elapsed Time: 4.6916129s
         Current Time: 22:31:53
ğŸ’€ ğŸ‰ ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ‰ Job Complete!!! ğŸ‰ğŸ‰ğŸ‰
ğŸ’€ ğŸ”¥ Terminating
ğŸ’€ ğŸ” Job Ended...
         Elapsed Time: 4.8934313s
         Current Time: 22:31:53
zaruba please pushSubrepos -e '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/.env' -v '/home/gofrendi/zaruba/docs/examples/playground/use-cases/external-repositories/default.values.yaml'
```````
</details>
<!--endCode-->


<!--startTocSubTopic-->
<!--endTocSubTopic-->